<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>olfarve.js</title>
<script src="olfarve.js"></script>
<script>
const MAX_SCALE = 40;

function initTable() {
  let table = document.createElement('table');
  table.id = "colors";
  let array = ['SRM', 'sRGB'];
  let tr = document.createElement('tr');
  for (let i = 0; i < array.length; ++i) {
    let th = document.createElement('th');
    let text = document.createTextNode(array[i]);
    th.appendChild(text);
    tr.appendChild(th);
  }
  table.appendChild(tr);
  for (let i = 1; i < MAX_SCALE + 1; ++i) {
      let tr = document.createElement('tr');
      tr.style.color = '#ffffff';
      let td1 = document.createElement('td');
      let td2 = document.createElement('td');
      var text1 = document.createTextNode(i.toString());
      var text2 = document.createTextNode('');
      td1.appendChild(text1);
      td2.appendChild(text2);
      tr.appendChild(td1);
      tr.appendChild(td2);
      table.appendChild(tr);
  }
  document.body.appendChild(table);  
}

function getPath() {
  return document.getElementById("pathselect").value;
}

function updatePathDisplay() {
  document.getElementById("path").value = getPath();
}

function updateTable() {
  let path = getPath();
  let table = document.getElementById("colors");
  for (let i = 1; i < MAX_SCALE + 1; ++i) {
    let color = rgbToHex(srmToSRGB(i, path));
    let row = table.rows[i];
    row.style.backgroundColor = color;
    row.cells[1].innerHTML = color;
  }
}

window.onload = (event) => {
  document.getElementById("pathselect").value = DEFAULT_PATH;
  updatePathDisplay();
  initTable();
  updateTable();
  
  document.getElementById("pathselect").oninput = () => {
    updatePathDisplay();
    updateTable();
  }
};
</script>
</head>
<body>
<form>
<label for="path">Path [cm]:</label><br>
<input type="text" id="path" readonly><br>
<input type="range" min="1" max="10" value="5" id="pathselect">
</form>
</body>
</html>
